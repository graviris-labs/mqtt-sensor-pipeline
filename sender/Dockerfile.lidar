FROM python:3.9-slim

WORKDIR /app

# Install dependencies
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
RUN pip install --no-cache-dir rplidar-py

# Copy the sender code and lidar integration example
COPY sender.py .
COPY ../examples/lidar_integration.py .

# Make the script executable
COPY run_lidar_sender.sh .
RUN chmod +x run_lidar_sender.sh

# Set the entrypoint to the lidar integration script
CMD ["python3", "lidar_integration.py"]
